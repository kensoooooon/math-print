
{% extends 'math_print/base.html' %}

{% block script %}
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<!-- Stylesheet -->
<link href="//cdnjs.cloudflare.com/ajax/libs/jsxgraph/1.4.5/jsxgraph.min.css" rel="stylesheet">
<!-- JavaScript -->
<script src="//cdnjs.cloudflare.com/ajax/libs/jsxgraph/1.4.5/jsxgraphcore.js"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX","output/HTML-CSS"],
        tex2jax: {
            inlineMath: [["$","$"],["\\(","\\)"]],
            displayMath: [["$$","$$"],["\\[","\\]"]]
        }
        });
</script>

<script>
function showAnswer(){
    var nodes = document.getElementsByClassName('answer');
    for(var i = 0; i < nodes.length; i++){
        nodes[i].style.visibility = 'visible';
    }
}
function refresh() {
    var url = location.origin;
    var pathname = location.pathname;
    var hash = location.hash;
    location = url + pathname + '?application_refresh=' + (Math.random() * 100000) + hash;
}

window.addEventListener("load", (event)=>{
    const text_css = 'font-family: "Times New Roman", Times, "serif"; font-style: italic';

    let jsx1 = JXG.JSXGraph.initBoard("jxgbox1", {axis: true, boundingbox: [-1, 5, 8, -4]});
    jsx1.create("functiongraph", [x => x ** 2, -7, 7], {strokeColor: "red"});
    jsx1.create("functiongraph", [x => 4 * x - 4, -7, 7], {strokeColor: "blue"});
    jsx1.create("text", [0.125, -0.125, 'O'], {fontsize: 16, cssStyle: text_css});
    jsx1.create('text', [3.8, 0.07, 'x'],{ fontSize: 16, cssStyle: text_css });
    jsx1.create('text', [0.05, 0.9, 'y'],{ fontSize: 16, cssStyle: text_css });
    jsx1.create('text', [2.1, -0.4, 'y = x^2'], {fontSize: 16, cssStyle: text_css, strokeColor: "red"});
    jsx1.create('text', [2.4, 0.3, 'y = 4x - 4'], {fontSize: 16, cssStyle: text_css, strokeColor: "blue"});


    /*
    var f = board.create('functiongraph', ['cos(x)']);
    var ineq = board.create('inequality', [f], {
                inverse: true, fillOpacity: 0.1
            });
    var circ = board.create('circle', [[0,0], 4]);

    var clip = board.create('curveintersection', [ineq, circ], {
                fillColor: 'yellow', fillOpacity: 0.6
            });
    */

    let jsx2 = JXG.JSXGraph.initBoard("jxgbox2", {axis: true, boundingbox: [-1, 5, 5, -1]});
    jsx2.create("functiongraph", [x => x ** 2 - x + 3, 0, 1], {strokeColor: "red"});
    jsx2.create("functiongraph", [x => x ** 2 - x + 3, 1, 8], {strokeColor: "gray", dash: 2});
    jsx2.create("functiongraph", [x => x ** 2 - x + 3, -7, 0], {strokeColor: "gray", dash: 2});
    jsx2.create("functiongraph", [x => -1 * x ** 2 + 3 * x + 1, 0, 1], {strokeColor: "blue"});
    jsx2.create("functiongraph", [x => -1 * x ** 2 + 3 * x + 1, 1, 8], {strokeColor: "gray", dash: 2});
    jsx2.create("functiongraph", [x => -1 * x ** 2 + 3 * x + 1, -7, 0], {strokeColor: "gray", dash: 2});
    jsx2.create("text", [0.125, -0.125, 'O'], {fontsize: 16, cssStyle: text_css});
    jsx2.create('text', [3.8, 0.07, 'x'],{ fontSize: 16, cssStyle: text_css });
    jsx2.create('text', [0.05, 0.9, 'y'],{ fontSize: 16, cssStyle: text_css });
    jsx2.create('text', [2.1, -0.4, 'y = x^2 - x + 3'], {fontSize: 16, cssStyle: text_css, strokeColor: "red"});
    jsx2.create('text', [2.4, 0.3, 'y = -x^2 + 3x + 1'], {fontSize: 16, cssStyle: text_css, strokeColor: "blue"});
    // added for filling
    // let f1 = 
    let board = JXG.JSXGraph.initBoard("jxgbox3", {axis: true, boundingbox: [-1, 5, 5, -1]});
    let f1 = board.create('functiongraph', [x => x ** 2 - x + 3, 0, 1], {strokeColor: 'red'});
    let ineq1 = board.create('inequality', [f1], {inverse: false, fillColor: 'white'});
    let f2 = board.create('functiongraph', [x => x = -1 * x ** 2 + 3 * x + 1, 0, 1], {strokeColor: 'blue'});
    let ineq2 = board.create('inequality', [f2], {inverse: true, fillColor: 'white'});
    let clip = board.create('curveintersection', [ineq1, ineq2], {fillColor: 'yellow', fillOpacity: 0.3});



    // with JXG.joinCurves
    let board2 = JXG.JSXGraph.initBoard("jxgbox4", {axis: true, boundingbox: [-1, 5, 5, -1]});
    let f12 = board2.create('functiongraph', [x => x ** 2 - x + 3, 0, 1], {strokeColor: 'red'});
    let ineq12 = board2.create('inequality', [f12], {inverse: true, fillColor: 'white'});
    /*
    // Join the three arcs and fill the area.
    var c4 = JXG.joinCurves(brd, [c1, c2, c3], 
        {   strokeColor:'black', 
            strokeWidth:3, 
            fillColor:'yellow', fillOpacity:0.2
        });
    */
    let area = JXG.joinCurves(board, [f1, f2], {strokeColor: 'black', fillColor: 'yellow'});
});
</script>
{% endblock %}

{% block added_cdn %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
{% endblock %}

{% block css %}
<style type="text/css">
    .fa-solid{
        color: gray;
        text-decoration: none;
    }
    .fa-pen-to-square{
        color: gray;
        text-decoration: none;
    }
</style>
{% endblock %}

{% block title %}
定積分で面積を求める(解説)
{% endblock %}

{% block hero_unit %}
<div class="p-3 p-sm-5 mb-4 bg-img hero_unit">
    <div class="container">
        <h1 class="display-4">ようこそ!</h1>
        <p class="text-dark">定積分で面積を求める(解説)</p>
    </div>
</div>
{% endblock %}

{% block body %}
<div class="container-fluid">
    <h1 class="h4">
        定積分で面積を求める
        <small class="text-muted">～\( \dfrac{1}{3} \)公式を上手く活用して、時間と労力を節約しよう～</small>
    </h1>

    <br>
    <ul class="list-group row m-4 p-4">
        <h2 class="h5">目次</h2>
        <li class="list-group-item"><a href="#foreword">前書き</a></li>
        <li class="list-group-item"><a href="#confirmation_of_integration_formula">定積分の定義の確認</a></li>
        <li class="list-group-item"><a href="#calculate_area_by_integration_with_formula">\( \dfrac{1}{3} \)公式を用いた面積の計算</a></li>
        <li class="list-group-item"><a href="#afterword">あとがき</a></li>
    </ul>
    <br>

    <div class="row m-4 p-4 border-bottom" id="foreword">
        <h2 class="text-muted h5">前書き</h2>
        <p class="lh-1">今回は\( \dfrac{1}{3} \)公式のお話を確認していきます。</p>
        <p class="lh-1">お話の内容としては\( \dfrac{1}{6} \)公式と同じく、「<span class="text-decoration-underline">いかに公式が使える場面を見つけて、それを適用していくか</span>」というものになります。</p>
        <p class="lh-1">なお、\( \dfrac{1}{3} \)公式が\( \dfrac{1}{6} \)公式と比べて応用的なものであることを踏まえて、\( \dfrac{1}{6} \)公式の序盤で説明したような基礎的な部分は省いていきます。</p>
        <p class="lh-1">もし、定積分の基本的な考え方や、\( \dfrac{1}{6} \)公式の使い方などに不安がある場合は、まずは以下のリンクから解説を確認してみてください。こちらは基礎から解説しています。
            (<a href="{% url 'calculate_area_by_integration_explain_one_sixth' %}" class="fa-solid fa-link" target="_blank" rel="noopener noreferrer"><small class="text-muted">解説を見る</small></a>)
        </p>
    </div>

    <div class="row m-4 p-4 border-bottom">
        <h2 class="text-muted h5" id="calculate_area_by_integration_with_formula">\( \dfrac{1}{3}公式を用いた面積の計算 \)</h2>
        <div class="m-2 p-2">
            <p class="lh-1">さっそく、公式を用いた面積の計算を確認していきましょう。</p>
            <p class="lh-1">今回使う公式は以下になります。</p>
        </div>

        <div class="border border-primary col-md-5">
            <p>
                \( \int (x - \alpha)^2 dx = \dfrac{1}{3} (x - \alpha)^3 + C \) (\( C; \)積分定数)
            </p>
        </div>

        <div class="m-2 p-2">
            <p class="lh-1">この公式は、\( \dfrac{1}{6} \)公式の方の証明でも利用していましたね。今回は証明に利用するのではなく、そのまま利用していきます。</p>
            <p class="lh-1">重要なのはずばり、<span class="text-decoration-underline">積分対象の関数が2乗にまとまっている</span>ことになります。</p>
            <p class="lh-1">\( \dfrac{1}{6} \)公式では、関数同士が2つの交点を持っていることが使用の第一条件でした。</p>
            <p class="lh-1">それにあやかって考えると、今回は関数同士が<span class="text-decoration-underline">1つの重解、すなわち接点</span>を持っている必要があります。</p>
        </div>

        <div class="m-2 p-2">
            <p class="lh-1">これだけ聞くと、今一つ使い道がぴんと来ない方もいると思いますので、ここでは具体的な例を示していきます。</p>
            <p class="lh-1">シンプルにわかりやすいのは、以下のような<span class="text-decoration-underline">接線が登場する</span>パターンですね。</p>
        </div>
        <br>
        <p class="lh-1 fst-italic border-bottom col-md-7">例題1: \( y = x^2 \)と、その上の点\( (2, 4) \)における接線、および\( y \)軸で囲まれた部分の面積を求めよ。</p>
        <br>
        <div class="m-2 p-2">
            <p class="lh-1">まずは接線を求めてみましょう。</p>
            <p class="lh-1">\( y' = 2x \)より、\( x = 2 \)における接線の傾きは\( 2 \cdot 2 = 4 \)となります。</p>
            <p class="lh-1">そのため、点\( (2, 4) \)における接線は、</p>
            <p class="lh-1">\( y - 4 = 4 (x - 2) \)</p>
            <p class="lh-1">\( y = 4x - 4 \)</p>
            <p class="lh-1">また、\( y = x^2 \)が下に凸であることからなんとなくわかりますが、念のために不等式を使って上下関係も把握しておきましょう。</p>
            <p class="lh-1">\( x^2 \geqq 4x - 4\)</p>
            <p class="lh-1">\( x^2 - 4x + 4 \geqq 0 \)</p>
            <p class="lh-1">\( (x - 2)^2 \geqq 0 \)</p>
            <p class="lh-1">この流れから、すべての\( x \)で\( y = x^2 \)が上であることがわかります。</p>
            <p class="lh-1">現時点で\( y \)軸も含めたグラフを描くと、以下のようになります。</p>
            <br>
            <div id="jxgbox1" class="jxgbox" style="width:500px; height:500px;"></div>
            <br>
            <p class="lh-1">上に\( y = \color{red} x^2 \color{black} \)、下に\( y = \color{blue} 4x - 4 \)があり、</p>
            <p class="lh-1">さらに\( 0 \leqq x \leqq 2 \)の間で囲まれているので、求めたい面積をSとすると以下のように求められます。</p>
            <p class="lh-1">\( S = \int_{0}^{2} \left\lbrace \color{red} x^2 \color{black} - \left( \color{blue} 4x - 4 \color{black} \right)\right\rbrace dx \)</p>
            <p class="lh-1">\( = \int_{0}^{2} (x^2 - 4x + 4) dx \)</p>
            <p class="lh-1">定義通り定積分をこなしていっても答えは求められますが、ここではさらに因数分解してみましょう。</p>
            <p class="lh-1">\( = \int_{0}^{2} (x - 2)^2 dx \)</p>
            <p class="lh-1"><span class="text-decoration-underline">全体が2乗にまとまっている</span>ので、公式を使って以下のように一気に計算可能です。あとはそのまま計算を進めれば</p>
            <p class="lh-1">\( = \left\lbrack \dfrac{1}{3} (x - 2)^3 \right\rbrack_{0}^{2} \)</p>
            <p class="lh-1">\( =  \dfrac{1}{3} \left\lbrack (x - 2)^3 \right\rbrack_{0}^{2} \)</p>
            <p class="lh-1">\( = \dfrac{1}{3} \left\lbrace (2 - 2)^3 - (0 - 2)^3 \right\rbrace \)</p>
            <p class="lh-1">\( = \dfrac{8}{3} \)</p>
            <p class="lh-1">というのが答えとなります。</p>
            <br>
            <p class="lh-1">いかがでしょうか？ちなみに、公式を全く利用しない計算ですと、以下のような流れになります。計算量を比較してみてください。</p>
            <p class="lh-1">\( S = \int_{0}^{2} (x^2 - 4x + 4) dx \)</p>
            <p class="lh-1">\( = \left\lbrack \dfrac{1}{3} x^3 - 2x^2 + 4x \right\rbrack_{0}^{2} \)</p>
            <p class="lh-1">\( = \left( \dfrac{1}{3} \cdot 2^3 - 2 \cdot 2^2 + 4 \cdot 2 \right) - \left( \dfrac{1}{3} \cdot 0^3 - 2 \cdot 0^2 + 4 \cdot 0 \right) \)</p>
            <p class="lh-1">\( = \left( \dfrac{8}{3} - 8 + 8 \right) - 0 \)</p>
            <p class="lh-1">\( = \dfrac{8}{3} \)</p>
            <p class="lh-1">幸いにして0が用いられているので、そこまで複雑な計算にはなっていませんが、やはり少々重たい計算と言わざるをえません。</p>
        </div>

        <div class="m-2 p-2">
            <p class="lh-1">ちなみに、1点で接しているものであれば、接線以外でも構いません。別の例も見てみましょう。</p>
        </div>
        <br>
        <p class="lh-1 fst-italic border-bottom col-md-7">例題2: \( y = x^2 - x + 3 \)と、\( y = -x^2 + 3x + 1 \)と\( y \)軸で囲まれた部分の面積を求めよ。</p>
        <br>
        <br>
        <div id="jxgbox2" class="jxgbox" style="width: 500px; height: 500px;"></div>
        <br>
        <div id="jxgbox3" class="jxgbox" style="width: 500px; height: 500px;"></div>
        <br>
        <div id="jxgbox4" class="jxgbox" style="width: 500px; height: 500px;"></div>
    </div>

    <div class="row m-4 p-4 border-bottom">
        <h2 class="text-muted h5">あとがき</h2>
        <div class="m-2 p-2">
            <p class="lh-1">解説は以上になります。いかがでしたか。</p>
            <p class="lh-1">途中でも書いた通り、\( \dfrac{1}{6} \)公式は慣れるまでは中々難儀しますが、使いこなせるようになれば非常に頼もしい公式です。</p>
            <p class="lh-1">慣れるための一番のコツは、常に「この問題には適用できるだろうか？」と考えることです。</p>
            <p class="lh-1">その他の面積のところでふれたように、ざっくり2つの交点を持つ関数で囲まれた面積であれば、\( \dfrac{1}{6} \)公式が利用できます。</p>
            <p class="lh-1">たくさん練習して、マスターしていきましょう。</p>
        </div>
    </div>
</div>

<div class="d-grid gap-3 col-6 mx-auto">
    <a href="{% url 'highschool2' %}" class="btn btn-primary" type="button">問題選択へ戻る</a>
    <a href="{% url 'index' %}" class="btn btn-primary" type="button">トップへ戻る</a>
</div>

<footer class="container-fluid print_footer">
    <small><a href="#">© 2022 有明学習振興</a></small>
</footer>
{% endblock %}